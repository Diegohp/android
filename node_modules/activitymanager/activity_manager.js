var thatall = this;

(function () {
    "use strict";

    var fluid = require("universal");
    var gpii = fluid.registerNamespace("gpii");
    var util = require("util");

    var bridge = require('bridge');



    fluid.registerNamespace("gpii.launch"); // Does this really need to be here?

    gpii.androidActivityManager = gpii.androidActivityManager || {};

    gpii.androidActivityManager.set = function(settingsarray) {
        var font = bridge.load('net.gpii.AndroidFontSettingsImpl', thatall);
        console.log(fluid.prettyPrintJSON(settingsarray));
        var newFontSize = settingsarray['com.android.activitymanager'][0]['settings']['text-scaling-factor'];
        console.log("The new font size is: " + newFontSize);
        font.setFontSize(newFontSize);
        //bridge.setFontSize(newFontSize);
        var app = fluid.copy(settingsarray);
        app['com.android.activitymanager'][0]['settings']['text-scaling-factor'] = {
            "oldValue": 1.0,
            "newValue": newFontSize
        };
        return app;
    };

    fluid.defaults("gpii.androidActivityManager.startTalkback", {
        gradeNames: "fluid.function",
        argumentMap: {
        }
    });

    fluid.defaults("gpii.androidActivityManager.stopTalkback", {
        gradeNames: "fluid.function",
        argumentMap: {
        }
    });

    fluid.defaults("gpii.androidActivityManager.startFreespeech", {
        gradeNames: "fluid.function",
        argumentMap: {
        }
    });


    gpii.androidActivityManager.startTalkback = function() {
        var a11y = bridge.load('net.gpii.AndroidA11ySettingsImpl', thatall);
        a11y.startTalkback();
    };

    gpii.androidActivityManager.stopTalkback = function() {
        var a11y = bridge.load('net.gpii.AndroidA11ySettingsImpl', thatall);
        a11y.stopTalkback();
    };

    gpii.androidActivityManager.startFreespeech = function() {
        var intent = bridge.load('net.gpii.AndroidIntentHandlerImpl', thatall);
        intent.startMainLauncherActivity('main','com.blogspot.tonyatkins.freespeech/com.blogspot.tonyatkins.freespeech.activity.StartupActivity');
    };


})();

    


    
